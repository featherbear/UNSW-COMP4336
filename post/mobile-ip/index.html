<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Mobile IP - COMP4336 Musings</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="z5206677"><meta name=description content="The Challenge IP World A mesh of subnets interconnected by routers"><meta name=keywords content="Hugo,theme,even"><meta name=generator content="Hugo 0.68.3 with theme even"><link rel=canonical href=../../post/mobile-ip/><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../manifest.json><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><link href=../../dist/even.c2a46f00.min.css rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin=anonymous><link rel=stylesheet href=../../css/typedjs.shortcode.css><link rel=stylesheet href=../../css/fixDetails.css><meta property="og:title" content="Mobile IP"><meta property="og:description" content="The Challenge IP World A mesh of subnets interconnected by routers"><meta property="og:type" content="article"><meta property="og:url" content="/post/mobile-ip/"><meta property="article:published_time" content="2020-07-29T09:00:00+10:00"><meta property="article:modified_time" content="2020-07-29T09:00:00+10:00"><meta itemprop=name content="Mobile IP"><meta itemprop=description content="The Challenge IP World A mesh of subnets interconnected by routers"><meta itemprop=datePublished content="2020-07-29T09:00:00+10:00"><meta itemprop=dateModified content="2020-07-29T09:00:00+10:00"><meta itemprop=wordCount content="836"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Mobile IP"><meta name=twitter:description content="The Challenge IP World A mesh of subnets interconnected by routers"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=../../ class=logo>COMP4336 Musings</a></div><div class=mobile-navbar-icon><span></span><span></span><span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=../../><li class=mobile-menu-item>Home</li></a><a href=https://github.com/featherbear/UNSW-COMP4336><li class=mobile-menu-item>GitHub</li></a><a href=../../categories/project/><li class=mobile-menu-item>Project</li></a><a href=../../categories/><li class=mobile-menu-item>Categories</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=../../ class=logo>COMP4336 Musings</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=../../>Home</a></li><li class=menu-item><a class=menu-item-link href=https://github.com/featherbear/UNSW-COMP4336>GitHub</a></li><li class=menu-item><a class=menu-item-link href=../../categories/project/>Project</a></li><li class=menu-item><a class=menu-item-link href=../../categories/>Categories</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>Mobile IP</h1><div class=post-meta><span class=post-time>2020-07-29</span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>Contents</h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><a href=#the-challenge>The Challenge</a><ul><li><a href=#ip-world>IP World</a></li><li><a href=#quasi-mobility>Quasi-Mobility</a></li><li><a href=#full-mobility>Full Mobility</a></li><li><a href=#dhcp-wlan>DHCP-WLAN</a></li></ul></li><li><a href=#the-solution---ip-mobility>The Solution - IP Mobility</a><ul><li><a href=#dual-ip-address>Dual IP Address</a></li><li><a href=#agents>Agents</a></li><li><a href=#foreign-agent-process>Foreign Agent Process</a></li><li><a href=#reverse-tunnelling>Reverse Tunnelling</a></li></ul></li><li><a href=#network-mobility>Network Mobility</a><ul><li><a href=#nemo-standard>NEMO Standard</a></li><li><a href=#multihoming>Multihoming</a></li></ul></li><li><a href=#ipv6>IPv6</a></li><li><a href=#proxy-mobile-ip>Proxy Mobile IP</a></li></ul></nav></div></div><div class=post-content><h1 id=the-challenge>The Challenge</h1><h2 id=ip-world>IP World</h2><p>A mesh of subnets interconnected by routers</p><ul><li>A device has a unique IP to connect</li><li>The IP address must carry the subnet prefix</li></ul><h3 id=the-issue>The Issue</h3><p>Since the IP address carries the subnet prefix, when it changes subnet (connecting to different cells) - the IP address must change!</p><h2 id=quasi-mobility>Quasi-Mobility</h2><p>Internet access from any subnet, but <strong>cannot move across subnet boundaries</strong></p><h2 id=full-mobility>Full Mobility</h2><p>Internet access from any subnet, and is able to move across subnet boundaries</p><h2 id=dhcp-wlan>DHCP-WLAN</h2><ul><li>Idea - Host-based Routing<ul><li>The entire 32 bits of the IP address used for routing</li><li>IP can therefore remain the same</li><li>But will need a GIANT routing table</li></ul></li></ul><h1 id=the-solution---ip-mobility>The Solution - IP Mobility</h1><p><img src=2020-07-31_00-12-59.png alt></p><p><strong>Location server</strong> tracks the location (subnet) of a device.<br>The location server can then help routers forward packets correctly</p><p>IETF RFC5944 (preceded by RFC3344 (2005))</p><h2 id=dual-ip-address>Dual IP Address</h2><p>A mobile host has TWO IP addresses</p><ul><li>Home address - Permanent (static) address</li><li>Care of address - Temporary address</li></ul><p>Connections to the permanent address are routed to the temporary address.<br>Home address is stored in DNS tables.</p><h2 id=agents>Agents</h2><p>A router contains a home agent and foreign agent software that coordinates the forwarding.</p><h3 id=home-agent>Home Agent</h3><p>???</p><h3 id=foreign-agent>Foreign Agent</h3><p>Accepts packets from home agents, and delivers them to visiting mobile hosts.</p><h4 id=foreign-agent-coa>Foreign Agent CoA</h4><p>Another router (for a subnet) that has several IP addresses.<br>The mobile device will then use of these IP addresses as its Care of Address.</p><p>Several devices can use the same Care of Address.</p><p>No new IP addresses consumed - DHCP <strong>not</strong> used!<br>Mobile connects using its permanent address</p><h4 id=co-located-coa>Co-located CoA</h4><ul><li>IP address exclusive to the mobile device</li></ul><p>A foreign agent is optional, and may not be needed.</p><p>When moving to a different subnet, a new IP is assigned via DHCP</p><hr><h2 id=foreign-agent-process>Foreign Agent Process</h2><ul><li>Phase 1 - Agent Discovery (or DHCP for Co-located CoA)</li><li>Phase 2 - Registration</li><li>Phase 3 - Data Transfer</li></ul><h3 id=agent-discovery-foreign-agent-only>Agent Discovery (Foreign Agent <strong>Only</strong>)</h3><p>IP Addresses of the Foreign Agent is advertised over ICMP.<br>Mobile devices wait for these periodic advertisements.<br>The mobile can also request an address directly from the router.</p><p>The mobile sends its permanent IP and MAC address to the foreign agent.<br>The foreign agent relays this to the home agent</p><h3 id=registration>Registration</h3><p>UDP Port 434</p><p><strong>IP Handoff</strong></p><p>Registration may take a long time...</p><p><strong>Solution 1</strong>: Wait for registration.<br><strong>Solution 2</strong>: Predict movement and pre-register for quick handover.</p><p><strong>Issues - Latency</strong></p><ul><li>Double crossing - (remote host goes over the internet to the home agent, which communicates over the internet to the mobile host)</li><li>Triangular routing - (remote host goes over the internet to the home agent, which goes to mobile host)</li></ul><p><strong>Mitigations</strong></p><ul><li>Route optimisation - Home Agent notifies the remote host of the new address<ul><li>However, may lead to sync issues (old address)</li><li>Also will require new functionality of the FA software</li></ul></li></ul><h3 id=data-transfer>Data Transfer</h3><p>IP-in-IP Protocol Encapsulation.</p><p>In the parent IP packet, the <code>next protocol</code> value is also IP.</p><hr><h2 id=reverse-tunnelling>Reverse Tunnelling</h2><p>The remote host and mobile host <em><strong>could</strong></em> connect to each other directly, eliminating the need to go through the home agent.<br>However a firewall mechanism called <em>ingress filtering</em> will prevent this from working.</p><p>Ingress filtering -> Prevents packets from passing only if the source address matches the packet origin.</p><p>Due to this, data must go back from the mobile host through the home agent, into the remote host.</p><hr><h1 id=network-mobility>Network Mobility</h1><p>Consider an <em><strong>entire subnet</strong></em> that moves</p><h2 id=nemo-standard>NEMO Standard</h2><ul><li>Onboard Router</li><li>Onboard Fixed Device - Does not need Mobile IP since it always communicates with a given Onboard Router</li><li>Onboard User Device - Double IP tunnelling -> IP-in-IP-in-IP</li></ul><h2 id=multihoming>Multihoming</h2><p>If the network infrastructure is unstable, there will be a bad quality of service to users.<br>Multihoming involves connecting to a Home Agent over different network links.</p><p>This allows load balancing and redundancy</p><h1 id=ipv6>IPv6</h1><p>Don't need DHCP, can use MAC address to generate its IP address!<br><em>Decreases the registration time</em>!</p><p>IPv6 Type 1 - src and destination</p><p>IPv4 needs IP-in-IP tunneling to carry both sets of address pairs.<br>IPv6 Type 2 - can include extra address pairs! Can also mitigate ingress filtering restrictions!</p><p><em><strong>An IPv6 implementation is more efficient than an 'upgraded IPv4' scheme, due to its extra header capability</strong></em></p><hr><h1 id=proxy-mobile-ip>Proxy Mobile IP</h1><blockquote><p>Not for global networks, only for campus deployment<br><strong>Does <em>not</em> use the internet</strong><br><strong>Does <em>not</em> need client-side software</strong></p></blockquote><p>To support Mobile IP, user devices need software and firmware upgrades.</p><ul><li>Cost overhead</li><li>Admin overhead</li><li>Deployment overhead</li></ul><p>Proxy Mobile IPs allows user devices to not require any special software.<br>The network edge (access points) install a Mobile IP client-proxy, which is transparent to the clients.</p><ul><li><p>LMA - Local Mobility Anchor</p><ul><li>Single device in the network core</li><li>Connects to multiple MAGs</li></ul></li><li><p>MAG - Mobile Access Gateway</p><ul><li>In the AP</li><li>Notifies the MAG of its connected hosts</li></ul></li></ul><p>Data from the WAN first goes to the LMA.<br>The MAG stations see if the Mobile Host is attached to them, and notifies the LMA.<br>The LMA then forwards the packet to that specific MAG, which sens the packet to the Mobile Host.</p></div><footer class=post-footer><nav class=post-nav><a class=prev href=../../post/labs/lab7/><i class="iconfont icon-left"></i><span class="prev-text nav-default">Lab 7</span>
<span class="prev-text nav-mobile">Prev</span></a>
<a class=next href=../../post/project/report/><span class="next-text nav-default">Project - Report</span>
<span class="next-text nav-mobile">Next</span>
<i class="iconfont icon-right"></i></a></nav></footer></article></div></div></main><footer id=footer class=footer><div class=social-links><a href=mailto:z5206677@student.unsw.edu.au class="iconfont icon-email" title=email></a><a href=https://www.linkedin.com/in/andrewjinmengwong/ class="iconfont icon-linkedin" title=linkedin></a><a href=https://github.com/featherbear class="iconfont icon-github" title=github></a><a href=https://www.instagram.com/_andrewjwong/ class="iconfont icon-instagram" title=instagram></a><a href=../../index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a></div><div class=copyright><span class=power-by>Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a></span>
<span class=division>|</span>
<span class=theme-info>Theme -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a></span>
<span class=copyright-year>&copy;
2020
<span class=heart><i class="iconfont icon-heart"></i></span><span class=author>Andrew Wong (z5206677)</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin=anonymous></script><script type=text/javascript src=../../dist/even.26188efa.min.js></script><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$'],['\\(','\\)']]},showProcessingMessages:false,messageStyle:'none'};</script><script async src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin=anonymous></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-107434487-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script src=../../js/typed.js@2.0.9></script><script src=../../js/typedjs.shortcode.js></script></body></html>